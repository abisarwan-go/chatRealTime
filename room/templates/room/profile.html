<!DOCTYPE html>
<html>
<head>
    <title>Profile</title>
</head>
<body>
    {% include 'header.html' %}
    <h2>Profile</h2>
    {% if user.is_authenticated %}
        <a href="{% url 'logout' %}">Logout</a>
    {% endif %}

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <div class="room-owner">
        <h1>Rooms</h1>
        {% for room in rooms %}
            <h3>Room name : {{ room.room_name }}</h3>
            <h3>Room owner : {{ room.room_owner }}</h3>
            {% if room.members.all %}
                <ul>

                    <h2> Members:  </h2>
                    {% for member in room.members.all %}
                        <li> {{ member.username }} </li>
                    {% endfor %}
                </ul>
            {% endif %}
            {% if is_owner and room.request_members.all %}
                <ul>
                    <h3> Members waiting approval  </h3>
                    {% for request_member in room.request_members.all %}
                        <li> {{ request_member.username }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endfor %}
    </div>

</body>
</html>
